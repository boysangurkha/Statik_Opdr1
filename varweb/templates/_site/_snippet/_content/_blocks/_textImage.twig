

{#{% set inverseClass = block.position == 'right' and block.image|length ? 'flex-row-reverse' : '' %}#}
{#{% set bgColor = block.backgroundColor == 'section--light' ? 'bg-offwhite py-7' : block.backgroundColor == 'section--default' ? 'bg-white' : (block.backgroundColor == 'section--primary' and block.position == 'right') ? 'bg-secondary' : 'bg-primary' %} #}

{% if block.backgroundColor == 'section--light' %}
		{% set rela = 'relative' %}
	{% if block.position == 'right' %}
		{% set inverseClass = 'flex-row-reverse' %}
		{% set bgColor = 'bg-offwhite clipRechts  absolute right-98' %}
		{% set additionalClasses = 'relative py-9 w-full' %}
		{% set paddingClasses = 'pl-7 pr-9' %}
	{% else %}
		{% set inverseClass = 'flex-row' %}
		{% set bgColor = 'bg-offwhite  clipLinks py-7 absolute left-98' %}
		{% set additionalClasses = 'relative py-9 w-full' %}
		{% set paddingClasses = 'pl-9 pr-7' %}
{% endif %}

{% elseif block.backgroundColor == 'section--default' %}
	{% set rela = 'relative' %}
	{% if block.position == 'right' %}
		{% set inverseClass = 'flex-row-reverse' %}
		{% set bgColor = 'bg-white  absolute right-98' %}
		{% set additionalClasses = ' relative py-9 flex-wrap' %}
		{% set paddingClasses = 'pl-5 pr-10' %}
	{% else %}
		{% set inverseClass = 'flex-row' %}
		{% set bgColor = 'bg-white  absolute left-98' %}
		{% set additionalClasses = ' relative py-9 w-full' %}
		{% set paddingClasses = 'pl-9 pr-5 ' %}
{% endif %}

{% elseif block.backgroundColor == 'section--primary' %}
	{% set rela = 'relative' %}
	{% if block.position == 'right' %}
		{% set inverseClass = 'flex-row-reverse' %}
		{% set bgColor = 'bg-primary z-99 clipBlue absolute right-96' %}
		{% set additionalClasses = ' relative py-9 flex-wrap' %}
		{% set paddingClasses = 'pl-5 pr-10 text-white' %}
	{% else %}
		{% set inverseClass = 'flex-row' %}
		{% set bgColor = 'bg-green z-99 clipGreen  absolute left-96' %}
		{% set additionalClasses = ' relative py-9 w-full' %}
		{% set paddingClasses = 'pl-9 pr-5' %}
	{% endif %}
{% endif %}

<div class="flex items-center -mx-4 {{ inverseClass }}  {{ additionalClasses }}">
	<div class="{{ bgColor }} py-9">
		<div class=" w-full {{ paddingClasses }}">
			{% if block.blockTitle|length %}
				<div class="text-xl font-serif font-medium" id="{{ craft.statik.slugify(block.blockTitle) }}">{{ block.blockTitle }}</div>
			{% endif %}
			{% if block.subTitle|length %}
				<div class=" font-sans text-xxs font-normal text-gray">{{ block.subTitle }}</div>
			{% endif %}
			{% if block.text|length %}
				<div class="pt-4 redactor font-sans text-xs font-normal">
					{{ block.text }}
				</div>
			{% endif %}
			{% if block.cta|length %}
				<div class="flex flex-wrap items-baseline pt-3 font-md font-sans font-medium">
					{% for cta in block.cta.all() %}
						{% include '_site/_snippet/_content/_blocks/_callToActionInclude' %}
					{% endfor %}
				</div>
			{% endif %}
		</div>
	</div>
	{% if block.image.collect().first() %}
		<div class="w-full px-4  md:w-1/2 {{ rela }} ">
			{% set image = block.image.collect().first() %}
			{% set optimizedImage = image.optimizedTextImage %}
			<picture>
				{% if craft.imageOptimize.serverSupportsWebP() and image.extension != 'svg' and image.extension != 'gif' %}
					<source srcset="{{ optimizedImage.srcsetWebP() }}"
							sizes="(max-width: 479px) 95vw, (min-width: 480px) and (max-width: 659px) 448px, (min-width: 660px) and (max-width: 819px) 628px, (min-width: 820px) and (max-width: 979px) 378px, (min-width: 980px) and (max-width: 1199px) 458px, (min-width: 1200px) 568px"
							type="image/webp"/>
				{% endif %}
				{% if image.extension == 'svg' or image.extension == 'gif' %}
					<img src="{{ image.getUrl() }}"
						width="{{image.width}}" height="{{image.height}}"
						alt="{{ image.imageCaption }}"
						class="w-full" loading="lazy"/>
				{% else %}
					<img src="{{ optimizedImage.placeholderBox() }}"
						srcset="{{ optimizedImage.srcset() }}"
						sizes="(max-width: 479px) 95vw, (min-width: 480px) and (max-width: 659px) 448px, (min-width: 660px) and (max-width: 819px) 628px, (min-width: 820px) and (max-width: 979px) 378px, (min-width: 980px) and (max-width: 1199px) 458px, (min-width: 1200px) 568px"
						width="{{optimizedImage.placeholderWidth}}" height="{{optimizedImage.placeholderHeight}}"
						alt="{{ image.imageCaption }}"
						class="w-full" loading="lazy"/>
				{% endif %}
			</picture>
			{% if image.imageCopyright|length or image.imageCaption|length %}
				<div class="mt-1 text-sm italic opacity-50">
					{% if image.imageCaption|length %}
						{{ image.imageCaption }}
					{% endif %}
					{% if image.imageCopyright|length and image.imageCaption|length %}
						- 
					{% endif %}
					{% if image.imageCopyright|length %}
						{{ image.imageCopyright }}
					{% endif %}
				</div>
			{% endif %}
		</div>
	{% endif %}
	
</div>
